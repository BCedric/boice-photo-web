import { queryStringBuild } from 'utils/QueryStringBuilder'
import { setHeaders } from 'utils/SetHeaders'

class Http {


    static get = (url, params = null, onResponseReceived = 'json') => {
        return fetch(queryStringBuild(url, params), {
            method: 'GET',
            headers: setHeaders()
        })
            .then(response => response[onResponseReceived]())
    }

    static post = (url, body, params = null) => {
        return fetch(queryStringBuild(url, params), {
            method: 'POST',
            body,
            headers: setHeaders()
        })
            .then(response => response.json())
    }


    static delete = (url, params = null) => {
        return fetch(queryStringBuild(url, params), {
            method: 'DELETE',
            headers: setHeaders()
        })
            .then(response => response.json())
    }

    static put = (url, body, params = null) => {
        return fetch(queryStringBuild(url, params), {
            method: 'PUT',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                ...setHeaders()
            },
            body: JSON.stringify(body)
        })
            .then(response => response.json())
    }

}

export default Http