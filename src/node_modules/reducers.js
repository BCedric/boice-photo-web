import { forEach } from 'lodash'
import { List, fromJS } from 'immutable'
import {types} from './actions'

export default function compteurReducer(state = {}, action) {
  var imgs
  switch (action.type) {
    case types.SAVE_IMG_ADDRS:
      return {imgAddr: fromJS(action.addrs.pictures), ...state}
    case types.LOAD_IMAGES:
      if(state.imgAddr !== undefined) {
        imgs = List()
        console.log('state.imgAddr', state.imgAddr.toJS());
        forEach(state.imgAddr.toArray(), imgAddr => {
          console.log(imgAddr.toJS());
          imgs = imgs.push({src: 'http://localhost:8080'+imgAddr.get('addr'), width:imgAddr.get('width'), height:imgAddr.get('height')})
        })
        console.log(imgs.toJS());
        return { imgs, ...state }
      }
      return state
    default:
      return state
  }
}
