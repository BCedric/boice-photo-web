import { forEach } from 'lodash'
import { List, fromJS } from 'immutable'
import {types} from './actions'

export default function pictureReducer(state = {}, action) {
  var imgs
  switch (action.type) {
    case types.SAVE_IMG_ADDRS:
      return {...state, imgAddr: fromJS(action.addrs.pictures) }
    case types.LOAD_IMAGES:
      if(state.imgAddr !== undefined) {
        imgs = List()
        forEach(state.imgAddr.toArray(), imgAddr => {
          imgs = imgs.push({src: 'http://localhost:8080'+imgAddr.get('addr'), width:imgAddr.get('width'), height:imgAddr.get('height')})
        })
        return { ...state, imgs }
      }
      return state
    case types.SET_GALLERY_ID:
      return {...state, galleryId: action.galleryId}
    default:
      return state
  }
}
